<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel</title>
    <style>
        body { font-family: sans-serif; background: #f7f7f7; margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
        h2 { color: #333; border-bottom: 2px solid #3498db; padding-bottom: 10px; }
        label { display: block; margin: 10px 0 5px; font-weight: bold; }
        input, select, textarea, button { width: 100%; padding: 10px; margin: 5px 0 15px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #3498db; color: white; border: none; cursor: pointer; }
        button:hover { background: #2980b9; }
        hr { margin: 30px 0; }
        .logout-form { display: inline; }
        .logout-btn { width: auto; padding: 8px 15px; background: #e74c3c; }
        .logout-btn:hover { background: #c0392b; }
    </style>
</head>
<body>
    {% include 'navbar.html' %}  <!-- ADD THIS LINE -->
    <div class="container">
        <h2>Neues Hotel anlegen</h2>

        <form action="/admin/add-hotel" method="POST" enctype="multipart/form-data">
            <label>Hotelname:</label>
            <input type="text" name="hotel_name" required>

            <label>Land:</label>
            <select name="country_id" id="country-create" required>
                {% for country in countries %}
                    <option value="{{ country.id }}">{{ country.name }}</option>
                {% endfor %}
            </select>

            <label>Region:</label>
            <select name="region_id" id="region-create" required>
                <option value="">Bitte Land wÃ¤hlen</option>
            </select>

            <label>Beschreibung:</label>
            <textarea name="description" rows="5" cols="40"></textarea>

            <label>Sterne (1â€“5):</label>
            <select name="stars" required>
                <option value="5">â˜…â˜…â˜…â˜…â˜…</option>
                <option value="4">â˜…â˜…â˜…â˜…</option>
                <option value="3">â˜…â˜…â˜…</option>
                <option value="2">â˜…â˜…</option>
                <option value="1">â˜…</option>
            </select>

            <label>Abflugdatum:</label>
            <input type="date" name="departure_date" required>

            <label>RÃ¼ckflugdatum:</label>
            <input type="date" name="return_date" required>

            <label>Preis gesamt (â‚¬):</label>
            <input type="number" step="0.01" name="total_price" required>

            <label>Anzahl Personen:</label>
            <input type="number" name="person_count" value="2" required>

            <label>Hotelbild hochladen:</label>
            <input type="file" name="hotel_image" accept="image/*">

            <button type="submit">Speichern</button>
        </form>

        <hr>

        <h2>Hotelsuche mit Filter & Sortierung</h2>

        <form method="GET" action="/search">
            <label for="country-search">Land wÃ¤hlen:</label>
            <select name="country_id" id="country-search" required>
                <option value="">Bitte wÃ¤hlen</option>
                {% for country in countries %}
                    <option value="{{ country.id }}">{{ country.name }}</option>
                {% endfor %}
            </select>

            <label for="region-search">Region wÃ¤hlen:</label>
            <select name="region_id" id="region-search" required>
                <option value="">Bitte erst Land wÃ¤hlen</option>
            </select>

            <label for="sort">Sortieren nach:</label>
            <select name="sort" id="sort">
                <option value="datum_auf">ðŸ“… Abflugdatum aufsteigend</option>
                <option value="datum_ab">ðŸ“… Abflugdatum absteigend</option>
                <option value="preis_auf">ðŸ’¶ Preis aufsteigend</option>
                <option value="preis_ab">ðŸ’¶ Preis absteigend</option>
                <option value="name_az">ðŸ”¤ Hotelname Aâ€“Z</option>
            </select>

            <button type="submit">Suchen</button>
        </form>

        <p><a href="/admin/view-hotels">ðŸ“‹ HotelÃ¼bersicht anzeigen</a></p>

        <form action="/logout" method="post" class="logout-form">
            <button type="submit" class="logout-btn">Logout</button>
        </form>

        <script>
            function loadRegions(countrySelectId, regionSelectId) {
                document.getElementById(countrySelectId).addEventListener('change', function () {
                    const countryId = this.value;
                    fetch('/get_regions?country_id=' + countryId)
                        .then(response => response.json())
                        .then(data => {
                            const regionSelect = document.getElementById(regionSelectId);
                            regionSelect.innerHTML = '<option value="">Bitte wÃ¤hlen</option>';
                            data.forEach(region => {
                                const option = document.createElement('option');
                                option.value = region.id;
                                option.textContent = region.name;
                                regionSelect.appendChild(option);
                            });
                        });
                });
            }

            // FÃ¼r beide Formulare aktivieren
            loadRegions('country-create', 'region-create');
            loadRegions('country-search', 'region-search');
        </script>
    </div>
</body>
</html>
